<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DAMBAEV-CASE</title>
    <style>
        :root {
            --bg: #05070a;
            --panel: rgba(22, 27, 34, 0.95);
            --accent: #00d4ff;
            --blue: #4b69ff; --purple: #8847ff; --pink: #d32ee6; --red: #eb4b4b; --gold: #ffb700;
        }

        body { 
            font-family: 'Segoe UI', sans-serif; 
            background: var(--bg); 
            color: white; 
            margin: 0; 
            overflow-x: hidden; 
            touch-action: manipulation; 
        }

        /* –°–ù–ï–ì ‚Äî –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤–µ—Å—å —ç–∫—Ä–∞–Ω */
        #snow { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100vw; 
            height: 100vh; 
            pointer-events: none; 
            z-index: 0; 
            background: transparent; 
        }

        #drop-notif { 
            position: fixed; 
            top: 60px; 
            right: 15px; 
            background: var(--accent); 
            color: #000; 
            padding: 10px 16px; 
            border-radius: 6px; 
            font-weight: bold; 
            display: none; 
            z-index: 1000; 
            font-size: 13px;
            box-shadow: 0 0 10px rgba(0,212,255,0.4);
        }

        /* –í–ï–†–•–ù–Ø–Ø –ü–ê–ù–ï–õ–¨ */
        header {
            width: 100%; 
            background: var(--panel); 
            backdrop-filter: blur(10px);
            padding: 9px 10px; 
            display: flex; 
            align-items: center;
            border-bottom: 1px solid rgba(255,255,255,0.1); 
            position: sticky; 
            top: 0; 
            z-index: 100;
            height: 50px;
            box-sizing: border-box;
            justify-content: flex-start;
        }

        /* –õ–û–ì–û–¢–ò–ü */
        .header-left { 
            font-weight: 900; 
            font-size: 16px; 
            color: var(--accent); 
            cursor: pointer; 
            padding: 0 8px; 
            flex: 0 0 auto;
        }

        /* –ë–ê–õ–ê–ù–° */
        .header-right { 
            font-size: 16px; 
            font-weight: bold; 
            color: var(--accent); 
            background: var(--panel);
            padding: 4px 8px;
            border-radius: 6px;
            min-width: 70px;
            text-align: center;
            box-shadow: 0 0 8px rgba(0,0,0,0.2);
            z-index: 10;
        }

        /* –ì–ê–ú–ë–£–†–ì–ï–† (—Ç–æ–ª—å–∫–æ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ) */
        .hamburger {
            font-size: 22px;
            cursor: pointer;
            background: rgba(0,212,255,0.15);
            color: white;
            padding: 6px 10px;
            border-radius: 6px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 11;
            display: none;
        }

        /* –î–ï–°–ö–¢–û–ü-–ú–ï–ù–Æ */
        .nav-center {
            display: flex;
            gap: 10px;
            font-size: 12px;
            flex-wrap: wrap;
            margin: 0 10px;
            flex: 1;
            justify-content: center;
        }

        .nav-link {
            cursor: pointer;
            font-weight: bold;
            text-transform: uppercase;
            opacity: 0.6;
            transition: 0.3s;
            padding: 5px 10px;
            border-radius: 6px;
        }

        .nav-link:hover, .nav-link.active {
            opacity: 1;
            color: var(--accent);
            background: rgba(0,212,255,0.1);
        }

        /* –ú–û–ë–ò–õ–¨–ù–û–ï –ú–ï–ù–Æ */
        .nav-mobile {
            display: none;
            position: fixed;
            top: 50px;
            left: 0;
            right: 0;
            background: var(--panel);
            padding: 12px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            z-index: 99;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            flex-direction: column;
            gap: 8px;
        }

        .nav-link-mobile {
            display: block;
            padding: 10px 20px;
            font-size: 14px;
            font-weight: bold;
            text-transform: uppercase;
            color: white;
            opacity: 0.7;
            text-align: center;
        }

        .nav-link-mobile:hover,
        .nav-link-mobile.active {
            opacity: 1;
            color: var(--accent);
            background: rgba(0,212,255,0.1);
        }

        /* –ö–û–ù–¢–ï–ô–ù–ï–†–´ */
        .container { 
            position: relative; 
            z-index: 1; 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 20px 15px; 
            display: none; 
            justify-content: center; 
            gap: 15px; 
            flex-wrap: wrap;
        }

        .active-page { display: flex !important; }

        .category-title { 
            width: 100%; 
            font-size: 20px; 
            font-weight: bold; 
            margin: 25px 0 15px; 
            border-left: 5px solid var(--accent); 
            padding-left: 12px; 
            color: #fff; 
        }

        /* –ö–ï–ô–°–´ */
        .case-card {
            background: var(--panel); 
            width: 150px; 
            padding: 15px; 
            border-radius: 12px;
            text-align: center; 
            border: 1px solid rgba(255,255,255,0.05); 
            cursor: pointer; 
            transition: 0.3s;
            flex: 0 0 auto;
        }

        .case-card:hover { 
            transform: translateY(-5px); 
            border-color: var(--accent); 
            box-shadow: 0 5px 15px rgba(0,212,255,0.2); 
        }

        .case-card .icon { 
            font-size: 40px; 
            margin-bottom: 8px; 
            display: block; 
        }

        .case-card h3 { 
            font-size: 16px; 
            margin: 5px 0; 
        }

        .case-card p { 
            font-size: 14px; 
            color: var(--accent); 
            margin: 0; 
        }

        /* –†–£–õ–ï–¢–ö–ê */
        #case-opener { flex-direction: column; text-align: center; }

        .roulette-wrapper {
            height: 120px; 
            background: rgba(0,0,0,0.7); 
            width: 100%; 
            max-width: 700px; 
            margin: 15px auto;
            border-radius: 10px; 
            overflow: hidden; 
            position: relative; 
            border: 1px solid #333;
        }

        .selector { 
            position: absolute; 
            left: 50%; 
            top: 0; 
            bottom: 0; 
            width: 3px; 
            background: var(--accent); 
            z-index: 10; 
            transform: translateX(-50%); 
            box-shadow: 0 0 10px var(--accent); 
        }

        .tape { 
            display: flex; 
            position: absolute; 
            left: 0; 
            top: 0; 
            height: 100%; 
            transition: transform 5s cubic-bezier(0.15, 0, 0.05, 1); 
        }

        .item {
            min-width: 100px; 
            height: 120px; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            border-bottom: 3px solid #555;
            background: rgba(255,255,255,0.02); 
            box-sizing: border-box;
            font-size: 10px;
            color: white;
            text-align: center;
            padding: 4px;
        }

        .item.blue { border-bottom-color: var(--blue); background: rgba(75, 105, 255, 0.1); color: var(--blue); }
        .item.purple { border-bottom-color: var(--purple); background: rgba(136, 71, 255, 0.1); color: var(--purple); }
        .item.pink { border-bottom-color: var(--pink); background: rgba(211, 46, 230, 0.1); color: var(--pink); }
        .item.red { border-bottom-color: var(--red); background: rgba(235, 75, 75, 0.1); color: var(--red); }
        .item.gold { border-bottom-color: var(--gold); background: rgba(255, 183, 0, 0.15); color: var(--gold); box-shadow: 0 0 8px rgba(255, 183, 0, 0.4); }

        .item span { font-size: 35px; }

        /* –ò–ù–í–ï–ù–¢–ê–†–¨ */
        .inv-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); 
            gap: 10px; 
            width: 100%; 
        }

        .inv-item { 
            background: var(--panel); 
            padding: 10px; 
            border-radius: 10px; 
            text-align: center; 
            border-bottom: 3px solid; 
            cursor: pointer; 
            transition: 0.2s; 
            position: relative;
            font-size: 12px;
        }

        .inv-item.selected { 
            border: 2px solid white !important; 
            background: rgba(0,212,255,0.1); 
        }

        .sell-btn-one { 
            background: rgba(235, 75, 75, 0.2); 
            color: #ff4b4b; 
            border: 1px solid #ff4b4b; 
            font-size: 10px; 
            cursor: pointer; 
            margin-top: 5px; 
            width: 100%; 
            border-radius: 4px; 
            padding: 3px;
        }

        /* –ê–ü–ì–†–ï–ô–î */
        .upgrade-container { 
            width: 100%; 
            display: flex; 
            flex-direction: column; 
            gap: 15px; 
        }

        .upgrade-side, .upgrade-center { 
            background: var(--panel); 
            padding: 15px; 
            border-radius: 12px; 
            border: 1px solid #333;
        }

        .upgrade-circle-wrapper { 
            width: 200px; 
            height: 200px; 
            margin: 20px auto; 
            position: relative; 
            border-radius: 50%; 
            background: #111; 
            border: 6px solid #222; 
            overflow: hidden; 
        }

        .upgrade-chance-sector { 
            position: absolute; 
            width: 100%; 
            height: 100%; 
            top: 0; 
            left: 0; 
            transform-origin: center; 
            background: var(--accent); 
            opacity: 0.3; 
        }

        .upgrade-arrow-pointer { 
            position: absolute; 
            top: 0; 
            left: calc(50% - 1.5px); 
            width: 3px; 
            height: 45%; 
            background: white; 
            transform-origin: bottom center; 
            z-index: 10; 
            box-shadow: 0 0 10px white; 
        }

        .upgrade-text-inner { 
            position: absolute; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%); 
            z-index: 11; 
            font-size: 24px; 
            font-weight: 900; 
            color: white; 
            text-shadow: 0 0 10px black; 
        }

        /* –ü–†–û–ú–û–ö–û–î–´ */
        .promo-container { 
            max-width: 100%; 
            margin: 0 auto; 
            text-align: center; 
            padding: 0 10px; 
        }

        .promo-input {
            width: 100%; 
            max-width: 300px; 
            padding: 12px; 
            font-size: 15px; 
            border-radius: 8px; 
            border: 2px solid #333; 
            background: rgba(255,255,255,0.05); 
            color: white;
            margin: 15px 0;
            outline: none;
        }

        .promo-btn {
            background: var(--accent); 
            color: black; 
            border: none; 
            padding: 12px 24px; 
            font-size: 16px; 
            font-weight: bold;
            border-radius: 8px; 
            cursor: pointer;
        }

        .btn-main {
            background: var(--accent); 
            color: black; 
            border: none; 
            padding: 14px 20px; 
            border-radius: 8px; 
            font-size: 16px; 
            font-weight: bold; 
            cursor: pointer; 
            margin: 10px 0;
            min-width: 150px;
        }

        .btn {
            background: #1e232b; 
            color: white; 
            border: 1px solid #3a414d; 
            padding: 10px 15px; 
            border-radius: 6px; 
            cursor: pointer; 
            font-weight: bold;
            font-size: 14px;
        }

        .case-items-preview {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 12px;
            width: 100%;
            margin: 10px 0;
        }

        .preview-box {
            padding: 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            border: 2px solid;
            text-align: center;
            font-size: 11px;
            width: 90px;
            min-height: 80px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 4px;
        }

        .preview-box span { font-size: 30px; }

        /* –ê–î–ê–ü–¢–ò–í –ü–û–î –¢–ï–õ–ï–§–û–ù */
        @media (max-width: 768px) {
            header {
                justify-content: flex-start;
                position: relative;
            }

            .header-left {
                position: absolute;
                left: 50%;
                top: 50%;
                transform: translate(-50%, -50%);
                margin: 0;
                z-index: 9;
                background: var(--panel);
                padding: 0 12px;
                border-radius: 8px;
                box-shadow: 0 0 10px rgba(0,0,0,0.1);
            }

            .hamburger {
                display: block;
                position: absolute;
                left: 12px;
                top: 50%;
                transform: translateY(-50%);
            }

            .header-right {
                position: absolute;
                right: 12px;
                top: 50%;
                transform: translateY(-50%);
            }

            .nav-center { display: none; }

            .case-card {
                width: calc(50% - 8px);
                max-width: 150px;
                padding: 12px;
                margin: 0;
                box-sizing: border-box;
            }
            .case-card .icon { font-size: 36px; }
            .case-card h3 { font-size: 15px; }
            .case-card p { font-size: 13px; }

            #main-page {
                justify-content: center;
                gap: 12px;
            }
        }

        @media (max-width: 480px) {
            .header-left { font-size: 15px; padding: 0 10px; }
            .hamburger { left: 10px; font-size: 20px; padding: 5px 8px; }
            .header-right { right: 10px; font-size: 14px; padding: 3px 6px; }
            .case-card { width: calc(50% - 6px); padding: 10px; }
            .case-card h3 { font-size: 14px; }
            .btn-main { width: 100%; }
        }

        /* –ë–ê–õ–ê–ù–° –ù–ê –ü–ö ‚Äî –í –ü–†–ê–í–û–ú –í–ï–†–•–ù–ï–ú –£–ì–õ–£ */
        @media (min-width: 769px) {
            .header-right {
                position: absolute;
                right: 12px;
                top: 9px;
            }
        }
    </style>
</head>
<body>

<canvas id="snow"></canvas>
<div id="drop-notif"></div>

<!-- –®–ê–ü–ö–ê -->
<header>
    <div class="header-left" onclick="goToPage('home-page', document.getElementById('nav-home'))">‚ùÑÔ∏è DAMBAEV</div>
    <div class="header-right" id="balance">10000$</div>
    <div class="hamburger" onclick="toggleMobileMenu()">‚ò∞</div>

    <div class="nav-center">
        <div id="nav-home" class="nav-link active" onclick="goToPage('home-page', this)">–ì–ª–∞–≤–Ω–∞—è</div>
        <div id="nav-main" class="nav-link" onclick="goToPage('main-page', this)">–ö–µ–π—Å—ã</div>
        <div id="nav-upgrade" class="nav-link" onclick="goToPage('upgrade-page', this)">–ê–ø–≥—Ä–µ–π–¥</div>
        <div id="nav-inv" class="nav-link" onclick="goToPage('inventory-page', this)">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</div>
        <div id="nav-promo" class="nav-link" onclick="goToPage('promo-page', this)">–ü—Ä–æ–º–æ–∫–æ–¥—ã</div>
    </div>

    <div class="nav-mobile" id="mobile-menu">
        <div class="nav-link-mobile" onclick="goToPage('home-page', this)">–ì–ª–∞–≤–Ω–∞—è</div>
        <div class="nav-link-mobile" onclick="goToPage('main-page', this)">–ö–µ–π—Å—ã</div>
        <div class="nav-link-mobile" onclick="goToPage('upgrade-page', this)">–ê–ø–≥—Ä–µ–π–¥</div>
        <div class="nav-link-mobile" onclick="goToPage('inventory-page', this)">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</div>
        <div class="nav-link-mobile" onclick="goToPage('promo-page', this)">–ü—Ä–æ–º–æ–∫–æ–¥—ã</div>
    </div>
</header>

<!-- –ì–õ–ê–í–ù–ê–Ø -->
<div id="home-page" class="container active-page">
    <div style="text-align: center; width: 100%;">
        <h2 style="color: var(--accent); font-size: 24px;">–î–û–ë–†–û –ü–û–ñ–ê–õ–û–í–ê–¢–¨</h2>
        <p style="font-size: 14px; opacity: 0.7;">–û—Ç–∫—Ä—ã–≤–∞–π –∫–µ–π—Å—ã –∏ —É–ª—É—á—à–∞–π —Å–∫–∏–Ω—ã</p>
        <button class="btn-main" onclick="goToPage('main-page')">–ö –ö–ï–ô–°–ê–ú</button>
    </div>
</div>

<!-- –ö–ï–ô–°–´ -->
<div id="main-page" class="container">
    <div class="category-title">–ó–∏–º–Ω–∏–µ –∫–µ–π—Å—ã</div>
    <div class="case-card" onclick="prepCase('winter_1')"><span class="icon">üßä</span><h3>–°–Ω–µ–∂–æ–∫</h3><p>100$</p></div>
    <div class="case-card" onclick="prepCase('winter_2')"><span class="icon">‚ùÑÔ∏è</span><h3>–õ–µ–¥–Ω–∏–∫</h3><p>300$</p></div>
    <div class="case-card" onclick="prepCase('winter_3')"><span class="icon">üå®Ô∏è</span><h3>–ë—É—Ä–∞–Ω</h3><p>700$</p></div>

    <div class="category-title">–û—Ä—É–∂–∏–µ</div>
    <div class="case-card" onclick="prepCase('gun_1')"><span class="icon">üî´</span><h3>–ë—é–¥–∂–µ—Ç–Ω—ã–π</h3><p>250$</p></div>
    <div class="case-card" onclick="prepCase('gun_2')"><span class="icon">üî´</span><h3>M4 –°–∫–ª–∞–¥</h3><p>600$</p></div>
    <div class="case-card" onclick="prepCase('gun_3')"><span class="icon">üî´</span><h3>AK –°–∫–ª–∞–¥</h3><p>850$</p></div>
    <div class="case-card" onclick="prepCase('gun_4')"><span class="icon">üéØ</span><h3>AWP –î—Ä–∞–∫–æ–Ω</h3><p>1500$</p></div>

    <div class="category-title">–ù–æ–∂–∏</div>
    <div class="case-card" onclick="prepCase('knife_1')"><span class="icon">üî™</span><h3>–®–∏—Ä–ø–æ—Ç—Ä–µ–±</h3><p>2000$</p></div>
    <div class="case-card" onclick="prepCase('knife_2')"><span class="icon">‚öîÔ∏è</span><h3>–ê—Ä–º–µ–π—Å–∫–∏–π</h3><p>4500$</p></div>
    <div class="case-card" onclick="prepCase('knife_3')"><span class="icon">üëë</span><h3>–ó–æ–ª–æ—Ç–æ–π –ù–æ–∂</h3><p>9000$</p></div>
</div>

<!-- –û–¢–ö–†–´–¢–ò–ï –ö–ï–ô–°–ê -->
<div id="case-opener" class="container">
    <h2 id="case-title" style="width: 100%; font-size: 18px;">–ö–µ–π—Å</h2>
    <div id="roulette-area" style="width: 100%;"></div>
    <div id="btns-area" style="width: 100%;"></div>
    <div style="font-weight:bold; margin: 15px 0; color: #888; width: 100%; font-size: 13px;">–°–û–î–ï–†–ñ–ò–ú–û–ï:</div>
    <div id="case-items-preview" class="case-items-preview"></div>
    <button class="btn" onclick="goToPage('main-page')">–ù–∞–∑–∞–¥</button>
</div>

<!-- –ò–ù–í–ï–ù–¢–ê–†–¨ -->
<div id="inventory-page" class="container">
    <button class="btn" style="background:var(--red); width:100%;" onclick="sellAll()">–ü–†–û–î–ê–¢–¨ –í–°–Å</button>
    <div id="inv-grid" class="inv-grid"></div>
</div>

<!-- –ê–ü–ì–†–ï–ô–î -->
<div id="upgrade-page" class="container">
    <div class="upgrade-container">
        <div class="upgrade-side">
            <h3 style="text-align:center; font-size: 16px;">–¢–≤–æ–π –ø—Ä–µ–¥–º–µ—Ç</h3>
            <div id="upgrade-inv-list" class="inv-grid"></div>
        </div>
        <div class="upgrade-center">
            <div class="upgrade-circle-wrapper">
                <div id="up-sector" class="upgrade-chance-sector"></div>
                <div id="up-arrow" class="upgrade-arrow-pointer"></div>
                <div id="up-chance-text" class="upgrade-text-inner">0%</div>
            </div>
            <p style="font-size: 14px;">–ù–∞–≥—Ä–∞–¥–∞: <b id="up-reward" style="color:var(--accent)">0$</b></p>
            <div style="margin:10px 0;">
                <button class="btn" onclick="setMult(1.5)">x1.5</button>
                <button class="btn" onclick="setMult(2)">x2</button>
                <button class="btn" onclick="setMult(5)">x5</button>
                <button class="btn" onclick="setMult(10)">x10</button>
            </div>
            <button id="upgrade-btn" class="btn-main" onclick="startUpgrade()">–£–õ–£–ß–®–ò–¢–¨</button>
        </div>
    </div>
</div>

<!-- –ü–†–û–ú–û–ö–û–î–´ -->
<div id="promo-page" class="container">
    <div class="promo-container">
        <h2 style="color: var(--accent); font-size: 20px;">üéÅ –ü—Ä–æ–º–æ–∫–æ–¥</h2>
        <p style="opacity: 0.7; font-size: 14px;">–í–≤–µ–¥–∏—Ç–µ –∏ –ø–æ–ª—É—á–∏—Ç–µ –¥–µ–Ω—å–≥–∏</p>
        <input type="text" id="promo-input" class="promo-input" placeholder="–ü—Ä–æ–º–æ–∫–æ–¥...">
        <button class="promo-btn" onclick="applyPromo()">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å</button>
        <div style="margin-top: 20px; font-size: 12px; opacity: 0.5;">
            <code style="color:var(--gold)">GIFT2026</code> ‚Äî 1000$<br>
            <code style="color:var(--gold)">FREEMONEY</code> ‚Äî 2500$<br>
            <code style="color:var(--gold)">DAMBAEVPRO</code> ‚Äî 5000$
        </div>
    </div>
</div>

<script>
    let balance = 10000;
    let inventory = [];
    let isSpinning = false;
    let curK = '';
    let selectedUpId = null;
    let curMult = 2;

    const skins_db = {
        winter_1: { price: 100, items: [
            {n:"USP | –õ–µ–¥", e:"üî´", r:"blue", p:40, ch:70},
            {n:"–ê–ö | –°–Ω–µ–≥", e:"üî´", r:"pink", p:800, ch:30}
        ]},
        winter_2: { price: 300, items: [
            {n:"M4 | –ò–Ω–µ–π", e:"üî´", r:"purple", p:400, ch:60},
            {n:"–ù–æ–∂ | –õ–µ–¥", e:"üî™", r:"gold", p:5000, ch:40}
        ]},
        winter_3: { price: 700, items: [
            {n:"–ê–ö | –ë—É—Ä–∞–Ω", e:"üî´", r:"pink", p:1200, ch:80},
            {n:"AWP | –õ–µ–¥", e:"üî´", r:"red", p:2500, ch:20}
        ]},
        gun_1: { price: 250, items: [
            {n:"Glock | –î—É—Ö", e:"üî´", r:"blue", p:80, ch:60},
            {n:"–ê–ö | –í—É–ª–∫–∞–Ω", e:"üî´", r:"pink", p:1200, ch:40}
        ]},
        gun_2: { price: 600, items: [
            {n:"M4 | –ê–∑–∏–º–æ–≤", e:"üî´", r:"pink", p:1100, ch:80},
            {n:"M4 | –ü–æ—Ç–æ–∫", e:"üî´", r:"red", p:2500, ch:20}
        ]},
        gun_3: { price: 850, items: [
            {n:"–ê–ö | –£–≥–æ–ª—å", e:"üî´", r:"pink", p:1200, ch:80},
            {n:"–ê–ö | –ó–º–µ–π", e:"üî´", r:"gold", p:15000, ch:20}
        ]},
        gun_4: { price: 1500, items: [
            {n:"AWP | –ì—É–Ω–≥–Ω–∏—Ä", e:"üî´", r:"red", p:8000, ch:90},
            {n:"AWP | –î—Ä–∞–∫–æ–Ω", e:"üî´", r:"gold", p:30000, ch:10}
        ]},
        knife_1: { price: 2000, items: [
            {n:"–ù–∞–≤–∞—Ö–∞", e:"üî™", r:"pink", p:1800, ch:90},
            {n:"–ë–∞–±–æ—á–∫–∞", e:"üî™", r:"gold", p:12000, ch:10}
        ]},
        knife_2: { price: 4500, items: [
            {n:"–ö–µ—Ä–∞–º–±–∏—Ç", e:"üî™", r:"red", p:5000, ch:80},
            {n:"–ú9 | –ö—Ä–æ–≤—å", e:"üî™", r:"gold", p:15000, ch:20}
        ]},
        knife_3: { price: 9000, items: [
            {n:"–ó–æ–ª–æ—Ç–æ–π –ù–æ–∂", e:"üî™", r:"gold", p:50000, ch:100}
        ]}
    };

    const promoCodes = {
        "GIFT2026": 1000,
        "FREEMONEY": 2500,
        "DAMBAEVPRO": 5000
    };
    let usedPromos = JSON.parse(localStorage.getItem('usedPromos')) || [];

    function updateBal() {
        document.getElementById('balance').innerText = balance + '$';
    }

    function goToPage(id, el) {
        closeMobileMenu();

        document.querySelectorAll('.container').forEach(c => c.classList.remove('active-page'));
        document.getElementById(id).classList.add('active-page');

        document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
        document.querySelectorAll('.nav-link-mobile').forEach(l => l.classList.remove('active'));

        if (el && el.classList.contains('nav-link')) {
            el.classList.add('active');
        }
        if (el && el.classList.contains('nav-link-mobile')) {
            el.classList.add('active');
        }

        if (id === 'inventory-page') renderInv('inv-grid');
        if (id === 'upgrade-page') { renderInv('upgrade-inv-list', true); updateUpUI(); }
    }

    function toggleMobileMenu() {
        const menu = document.getElementById('mobile-menu');
        if (menu.style.display === 'flex') {
            menu.style.display = 'none';
        } else {
            menu.style.display = 'flex';
        }
    }

    function closeMobileMenu() {
        document.getElementById('mobile-menu').style.display = 'none';
    }

    function prepCase(k) {
        curK = k;
        goToPage('case-opener');
        document.getElementById('case-title').innerText = k.replace('_', ' ').toUpperCase();
        document.getElementById('roulette-area').innerHTML = '';
        
        const p = skins_db[k].price;
        document.getElementById('btns-area').innerHTML = `
            <button class="btn btn-main" onclick="startSpin(1)">x1 ‚Äî ${p}$</button>
            <button class="btn btn-main" onclick="startSpin(2)">x2 ‚Äî ${p*2}$</button>
            <button class="btn btn-main" onclick="startSpin(3)">x3 ‚Äî ${p*3}$</button>
        `;

        const preview = document.getElementById('case-items-preview');
        preview.innerHTML = '';

        skins_db[k].items.forEach(item => {
            const box = document.createElement('div');
            box.className = 'preview-box';
            box.style.borderColor = `var(--${item.r})`;
            box.innerHTML = `
                <span>${item.e}</span>
                <div style="margin: 3px 0;">${item.n}</div>
                <b>${item.p}$</b>
            `;
            preview.appendChild(box);
        });
    }

    function startSpin(c) {
        const price = skins_db[curK].price * c;
        if (balance < price || isSpinning) return;

        balance -= price;
        updateBal();
        isSpinning = true;

        const area = document.getElementById('roulette-area');
        area.innerHTML = '<div class="roulette-wrapper"><div class="selector"></div><div class="tape" id="tape"></div></div>';
        const tape = document.getElementById('tape');
        const totalItems = 50 + c * 10;
        const winIndex = 40 + Math.floor(Math.random() * 10);

        for (let j = 0; j < totalItems; j++) {
            const item = getRnd(skins_db[curK].items);
            tape.innerHTML += `
                <div class="item ${item.r}">
                    <span>${item.e}</span>
                    <small>${item.n}</small>
                </div>`;
        }

        setTimeout(() => {
            tape.style.transform = `translateX(-${(winIndex * 100) - 250}px)`;
        }, 100);

        setTimeout(() => {
            tape.style.transform = `translateX(-${(winIndex * 100) - 250}px)`;
        }, 100);

        setTimeout(() => {
            const results = [];
            for (let i = 0; i < c; i++) {
                const item = getRnd(skins_db[curK].items);
                inventory.push({ ...item, id: Math.random() });
                results.push(item.n);
            }

            if (c === 1) {
                showNotif(`–í—ã–ø–∞–ª–æ: ${results[0]}`);
            } else {
                showNotif(`x${c} –∫–µ–π—Å–æ–≤: ${results.slice(0, 2).join(', ')}${results.length > 2 ? ' + –µ—â—ë ' + (results.length - 2) : ''}`);
            }

            if (document.getElementById('inventory-page').classList.contains('active-page')) {
                renderInv('inv-grid');
            }

            isSpinning = false;
        }, 5200);
    }

    function getRnd(arr) {
        let r = Math.random() * 100;
        let total = 0;
        for (let item of arr) {
            total += item.ch;
            if (r <= total) return item;
        }
        return arr[0];
    }

    function renderInv(targetId, sel = false) {
        const container = document.getElementById(targetId);
        if (!container) return;
        container.innerHTML = inventory.length ? inventory.map(i => `
            <div class="inv-item ${selectedUpId === i.id ? 'selected' : ''}" style="border-color:var(--${i.r})" onclick="${sel ? 'selUp(' + i.id + ')' : ''}">
                <span>${i.e}</span><br><small>${i.n}</small><br><b>${i.p}$</b>
                ${!sel ? `<button class="sell-btn-one" onclick="sellOne(${i.id})">–ü—Ä–æ–¥–∞—Ç—å</button>` : ''}
            </div>
        `).join('') : '–ü—É—Å—Ç–æ';
    }

    function sellOne(id) {
        const idx = inventory.findIndex(i => i.id === id);
        if (idx === -1) return;
        balance += inventory[idx].p;
        inventory.splice(idx, 1);
        updateBal();
        renderInv('inv-grid');
    }

    function sellAll() {
        inventory.forEach(i => balance += i.p);
        inventory = [];
        updateBal();
        renderInv('inv-grid');
    }

    function showNotif(text) {
        const notif = document.getElementById('drop-notif');
        notif.innerText = text;
        notif.style.display = 'block';
        setTimeout(() => notif.style.display = 'none', 3000);
    }

    function selUp(id) {
        selectedUpId = id;
        renderInv('upgrade-inv-list', true);
        updateUpUI();
    }

    function setMult(m) {
        curMult = m;
        updateUpUI();
    }

    function updateUpUI() {
        if (!selectedUpId) return;
        const item = inventory.find(i => i.id === selectedUpId);
        const chance = (100 / curMult).toFixed(1);
        document.getElementById('up-chance-text').innerText = chance + '%';
        document.getElementById('up-reward').innerText = (item.p * curMult).toFixed(0) + '$';
        const angle = (chance / 100) * 360;
        document.getElementById('up-sector').style.background = `conic-gradient(var(--accent) ${angle}deg, transparent 0deg)`;
    }

    function startUpgrade() {
        if (!selectedUpId || isSpinning) return;
        const item = inventory.find(i => i.id === selectedUpId);
        const reward = item.p * curMult;
        isSpinning = true;
        const arrow = document.getElementById('up-arrow');
        const rot = 1800 + Math.random() * 360;
        arrow.style.transition = 'transform 3s cubic-bezier(0.15, 0, 0.05, 1)';
        arrow.style.transform = `rotate(${rot}deg)`;

        setTimeout(() => {
            const finalAngle = rot % 360;
            const winAngle = (100 / curMult / 100) * 360;
            if (finalAngle <= winAngle) {
                showNotif("–£–°–ü–ï–•! +" + reward.toFixed(0) + "$");
                balance += reward;
            } else {
                showNotif("–ù–ï–£–î–ê–ß–ê!");
            }
            inventory = inventory.filter(i => i.id !== selectedUpId);
            selectedUpId = null;
            isSpinning = false;
            arrow.style.transition = 'none';
            arrow.style.transform = 'rotate(0deg)';
            updateBal();
            renderInv('upgrade-inv-list', true);
            updateUpUI();
        }, 3100);
    }

    function applyPromo() {
        const input = document.getElementById('promo-input');
        const code = input.value.trim().toUpperCase();

        if (!code) {
            showNotif("–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥!");
            return;
        }

        if (!promoCodes[code]) {
            showNotif("‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥!");
            return;
        }

        if (usedPromos.includes(code)) {
            showNotif("üîÑ –£–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω!");
            return;
        }

        const amount = promoCodes[code];
        balance += amount;
        usedPromos.push(code);
        localStorage.setItem('usedPromos', JSON.stringify(usedPromos));
        updateBal();
        showNotif(`‚úÖ +${amount}$ –∑–∞ –ø—Ä–æ–º–æ–∫–æ–¥!`);
        input.value = '';
    }

    // –°–ù–ï–ñ–ò–ù–ö–ò ‚Äî –ø–ª–∞–≤–Ω–æ, –Ω–∞ –≤—Å–µ—Ö —ç–∫—Ä–∞–Ω–∞—Ö
    const canvas = document.getElementById('snow');
    const ctx = canvas.getContext('2d');
    let pts = [];
    function res() { 
        canvas.width = window.innerWidth; 
        canvas.height = window.innerHeight; 
    }
    window.addEventListener('resize', res);
    res();

    for (let i = 0; i < 70; i++) {
        pts.push({ 
            x: Math.random() * canvas.width, 
            y: Math.random() * canvas.height, 
            r: Math.random() * 3 + 1,
            speed: Math.random() * 1 + 0.5
        });
    }

    function drawSnow() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "rgba(255, 255, 255, 0.9)";
        ctx.beginPath();
        for (let p of pts) {
            ctx.moveTo(p.x, p.y);
            ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
            p.y += p.speed;
            if (p.y > canvas.height) {
                p.y = -10;
                p.x = Math.random() * canvas.width;
            }
        }
        ctx.fill();
        requestAnimationFrame(drawSnow);
    }
    drawSnow();
    updateBal();
</script>
</body>
</html>
